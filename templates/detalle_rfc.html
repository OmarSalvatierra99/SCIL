{% extends "base.html" %}
{% block title %}SASP Â· Detalle del Trabajador{% endblock %}

{% block content %}
<section class="page detalle-rfc">
  <header class="page-header">
    <h1>Detalle del Trabajador</h1>
    <p>Historial laboral detectado para el RFC <strong>{{ rfc }}</strong>.</p>
  </header>

  {% if info %}
  <article class="result-card">
    <header class="result-header">
      <h2>{{ info.nombre or 'Sin nombre registrado' }}</h2>
      <p>RFC: {{ rfc }}</p>
    </header>

    {% if info.entes %}
    <section class="ente-tags">
      <h3>Entes vinculados</h3>
      {% for e in info.entes %}
      <a href="{{ url_for('resultados_por_ente', ente=e) }}">{{ e }}</a>
      {% endfor %}
    </section>
    {% endif %}

    {% if info.registros %}
    <section class="registro-list">
      {% for reg in info.registros %}
      <article class="registro-item">
        <header>
          <h3>{{ reg.puesto or 'Sin puesto definido' }}</h3>
          <p>{{ reg.ente }}</p>
        </header>

        <dl>
          <dt>Fecha Alta</dt><dd>{{ reg.fecha_ingreso or 'â€”' }}</dd>
          <dt>Fecha Baja</dt><dd>{{ reg.fecha_egreso or 'â€”' }}</dd>
          <dt>Monto (MXN)</dt><dd>{{ reg.monto or 'â€”' }}</dd>
          <dt>Cruce Quincenas</dt><dd>{{ reg.qnas or 'â€”' }}</dd>
        </dl>
      </article>
      {% endfor %}
    </section>
    {% else %}
    <section class="empty-state">
      <p>ğŸ“­ No se encontraron registros laborales.</p>
    </section>
    {% endif %}
  </article>

  <footer class="volver">
    <a href="{{ url_for('resultados_generales') }}" class="btn btn-secondary">
      â† Volver a Resultados Generales
    </a>
  </footer>

  {% else %}
  <section class="empty-state">
    <p>ğŸ‘¤ No se encontrÃ³ informaciÃ³n del trabajador.</p>
  </section>
  {% endif %}
</section>
{% endblock %}

