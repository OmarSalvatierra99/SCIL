{% extends "base.html" %}
{% block title %}SASP - Resultados por Persona{% endblock %}

{% block content %}
<div class="container resultados-personal">

  <header class="page-header">
    <h2>Detalle del Trabajador</h2>
    <p class="subtitle">
      Historial de registros detectados para el RFC <strong>{{ rfc }}</strong>.
    </p>
  </header>

  {% if info %}
  <article class="result-card">
    <header class="result-header">
      <div>
        <h3>{{ rfc }}</h3>
        <p class="result-nombre">{{ info.nombre or 'Sin nombre registrado' }}</p>
      </div>
    </header>

    {% if info.entes %}
    <div class="ente-list">
      <strong>Entes vinculados:</strong>
      {% for e in info.entes %}
        <a href="{{ url_for('resultados_por_ente', ente=e) }}" class="ente-tag">{{ e }}</a>
      {% endfor %}
    </div>
    {% endif %}

    {% if info.registros %}
    <table class="detalle-tabla">
      <thead>
        <tr>
          <th>Ente</th>
          <th>Puesto</th>
          <th>Fecha Alta</th>
          <th>Fecha Baja</th>
          <th>Monto (MXN)</th>
          <th>Quincenas Activas</th>
        </tr>
      </thead>
      <tbody>
        {% for reg in info.registros %}
        <tr>
          <td>{{ reg.ente or 'â€”' }}</td>
          <td>{{ reg.puesto or 'â€”' }}</td>
          <td>{{ reg.fecha_ingreso or 'â€”' }}</td>
          <td>{{ reg.fecha_egreso or 'â€”' }}</td>
          <td>{{ reg.monto or 'â€”' }}</td>
          <td>
            {% if reg.qnas %}
              <span class="qna-badge">{{ reg.qnas }}</span>
            {% else %}
              â€”
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <section class="empty-state">
        <div class="empty-icon">ðŸ“­</div>
        <h3>No se encontraron registros laborales</h3>
      </section>
    {% endif %}
  </article>

  {% else %}
  <section class="empty-state">
    <div class="empty-icon">ðŸ‘¤</div>
    <h3>No se encontrÃ³ informaciÃ³n del trabajador</h3>
  </section>
  {% endif %}
</div>
{% endblock %}

