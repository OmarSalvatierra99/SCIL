{% extends "base.html" %}
{% block title %}SASP Â· Detalle del Ente{% endblock %}

{% block content %}
<section class="page detalle-ente">
  <header class="page-header">
    <h1>Detalle del Ente</h1>
    <p>Registros laborales vinculados al ente <strong>{{ ente }}</strong>.</p>
  </header>

  {% if resultados_agrupados %}
  {% for rfc, info in resultados_agrupados.items() %}
  <article class="result-card">
    <header class="result-header">
      <h2><a href="{{ url_for('resultados_por_rfc', rfc=rfc) }}">{{ rfc }}</a></h2>
      <p>{{ info.nombre or 'Sin nombre registrado' }}</p>
    </header>

    {% if info.registros %}
    <section class="registro-list">
      {% for reg in info.registros %}
      <article class="registro-item">
        <header>
          <h3>{{ reg.puesto or 'Sin puesto definido' }}</h3>
        </header>

        <dl>
          <dt>Fecha Alta</dt><dd>{{ reg.fecha_ingreso or 'â€”' }}</dd>
          <dt>Fecha Baja</dt><dd>{{ reg.fecha_egreso or 'â€”' }}</dd>
          <dt>Monto (MXN)</dt><dd>{{ reg.monto or 'â€”' }}</dd>
          <dt>Cruce Quincenas</dt><dd>{{ reg.qnas or 'â€”' }}</dd>
        </dl>
      </article>
      {% endfor %}
    </section>
    {% else %}
    <section class="empty-state">
      <p>ğŸ“­ No se encontraron registros laborales.</p>
    </section>
    {% endif %}
  </article>
  {% endfor %}
  {% else %}
  <section class="empty-state">
    <p>ğŸ¢ No se encontrÃ³ informaciÃ³n para este ente.</p>
  </section>
  {% endif %}

  <footer class="volver">
    <a href="{{ url_for('resultados_generales') }}" class="btn btn-secondary">
      â† Volver a Resultados Generales
    </a>
  </footer>
</section>
{% endblock %}

