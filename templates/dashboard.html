{% extends "base.html" %}
{% block title %}SASP - Panel de Control{% endblock %}

{% block content %}
<div class="container dashboard">

  <header class="page-header">
    <h2>Bienvenido(a), {{ nombre }}</h2>
    <p class="subtitle">
      Cargue uno o varios archivos de n칩mina por quincena para su an치lisis.<br>
      El sistema identificar치 autom치ticamente los cruces de personal por RFC y quincena.
    </p>
  </header>

  <!-- Secci칩n de carga de archivos -->
  <section class="upload-section">
    <form id="uploadForm" method="POST" enctype="multipart/form-data" action="{{ url_for('upload_laboral') }}">
      <div class="upload-area" id="uploadArea" tabindex="0" aria-label="츼rea para subir archivos de n칩mina">
        <div class="upload-icon">游늬</div>
        <div class="upload-text">
          <h3>Arrastre o seleccione sus archivos Excel</h3>
          <p>Formatos permitidos: <strong>XLSX / XLS</strong></p>
        </div>
        <input type="file" id="fileInput" name="files" multiple accept=".xlsx,.xls" hidden>
      </div>

      <div class="upload-footer">
        <button type="submit" class="btn btn-primary">Procesar Archivos</button>
      </div>
    </form>

    <!-- Estado de procesamiento -->
    <div id="uploadStatus" class="upload-status" style="display:none;">
      <div class="spinner"></div>
      <p>Procesando archivos, por favor espere...</p>
    </div>

    <!-- Resultado del procesamiento -->
    <div id="uploadResult" class="upload-result" style="display:none;">
      <h4>Resultado del an치lisis</h4>
      <p id="resultMessage"></p>
    </div>
  </section>

  <!-- Acceso al reporte general -->
  <section class="results-minimal">
    <a href="{{ url_for('reporte_por_ente') }}" class="btn btn-secondary">
      Ver Reporte por Ente
    </a>
  </section>

</div>
{% endblock %}

